<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="RadioConsole.Views.AudioControlPage"
             Title="Audio Control"
             BackgroundColor="{DynamicResource Background}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            
            <!-- Status Section -->
            <Frame BackgroundColor="{DynamicResource PrimaryContainer}" 
                   CornerRadius="12"
                   Padding="16">
                <VerticalStackLayout Spacing="8">
                    <Label Text="Status" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{DynamicResource OnPrimaryContainer}" />
                    <Label Text="{Binding StatusMessage}" 
                           FontSize="14"
                           TextColor="{DynamicResource OnPrimaryContainer}" />
                </VerticalStackLayout>
            </Frame>

            <!-- Input Selection -->
            <Frame BackgroundColor="{DynamicResource Surface}" 
                   CornerRadius="12"
                   Padding="16">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Audio Input" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{DynamicResource OnSurface}" />
                    <Picker ItemsSource="{Binding AudioInputs}"
                            SelectedItem="{Binding SelectedInput}"
                            ItemDisplayBinding="{Binding Name}"
                            Title="Select Input"
                            TextColor="{DynamicResource OnSurface}" />
                    <Label Text="{Binding SelectedInput.Description}" 
                           FontSize="12"
                           TextColor="{DynamicResource OnSurface}"
                           IsVisible="{Binding SelectedInput, Converter={StaticResource IsNotNullConverter}}" />
                </VerticalStackLayout>
            </Frame>

            <!-- Output Selection -->
            <Frame BackgroundColor="{DynamicResource Surface}" 
                   CornerRadius="12"
                   Padding="16">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Audio Output" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{DynamicResource OnSurface}" />
                    <Picker ItemsSource="{Binding AudioOutputs}"
                            SelectedItem="{Binding SelectedOutput}"
                            ItemDisplayBinding="{Binding Name}"
                            Title="Select Output"
                            TextColor="{DynamicResource OnSurface}" />
                    <Label Text="{Binding SelectedOutput.Description}" 
                           FontSize="12"
                           TextColor="{DynamicResource OnSurface}"
                           IsVisible="{Binding SelectedOutput, Converter={StaticResource IsNotNullConverter}}" />
                </VerticalStackLayout>
            </Frame>

            <!-- Volume Control -->
            <Frame BackgroundColor="{DynamicResource Surface}" 
                   CornerRadius="12"
                   Padding="16">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Volume" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{DynamicResource OnSurface}" />
                    <Slider Minimum="0" 
                            Maximum="1" 
                            Value="{Binding Volume}"
                            MinimumTrackColor="{DynamicResource Primary}"
                            MaximumTrackColor="{DynamicResource SecondaryContainer}" />
                    <Label Text="{Binding Volume, StringFormat='Volume: {0:P0}'}" 
                           FontSize="14"
                           HorizontalOptions="Center"
                           TextColor="{DynamicResource OnSurface}" />
                </VerticalStackLayout>
            </Frame>

            <!-- Playback Controls -->
            <Grid ColumnDefinitions="*,*" 
                  ColumnSpacing="12">
                <Button Grid.Column="0"
                        Text="Play"
                        Command="{Binding PlayCommand}"
                        BackgroundColor="{DynamicResource Primary}"
                        TextColor="{DynamicResource OnPrimary}"
                        CornerRadius="24"
                        HeightRequest="56"
                        IsEnabled="{Binding IsPlaying, Converter={StaticResource InvertedBoolConverter}}" />
                <Button Grid.Column="1"
                        Text="Stop"
                        Command="{Binding StopCommand}"
                        BackgroundColor="{DynamicResource Secondary}"
                        TextColor="{DynamicResource OnSecondary}"
                        CornerRadius="24"
                        HeightRequest="56"
                        IsEnabled="{Binding IsPlaying}" />
            </Grid>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
